<!DOCTYPE html>
<html lang="en">
<head>
    <title>Judo Scoreboard</title>
    <link rel="icon" type="image/x-icon" href="./images/judo_pictogram.svg">
</head>
<body>
    <table class="scoreboard_full">
        <tbody>
            <tr class="scoreboard_fighter_row">
                <td>
                    <table style="background-color: #eeeeee">
                        <tbody>
                            <tr>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(0,'ippon')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Ippon (Shift/Ctrl+1)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(0,'ippon')" oncontextmenu="event.preventDefault(); remove_point(0, 'ippon')" id="point_0_ippon">NaN</span>
                                        <button
                                            onclick="add_point(0,'ippon')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Ippon (1)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(0,'wazari')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Wazari (Shift/Ctrl+2)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(0,'wazari')" oncontextmenu="event.preventDefault(); remove_point(0, 'wazari')" id="point_0_wazari">NaN</span>
                                        <button
                                            onclick="add_point(0,'wazari')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Wazari (2)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(0,'yuko')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Yuko (Shift/Ctrl+7)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(0,'yuko')" oncontextmenu="event.preventDefault(); remove_point(0, 'yuko')" id="point_0_yuko">NaN</span>
                                        <button
                                            onclick="add_point(0,'yuko')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Yuko (7)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point penalty">
                                        <button
                                            onclick="remove_point(0,'shido')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Shido (Shift/Ctrl+3)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(0,'shido')" oncontextmenu="event.preventDefault(); remove_point(0, 'shido')" id="point_0_shido">NaN</span>
                                        <button
                                            onclick="add_point(0,'shido')"
                                            type="button"
                                            class="btn btn-secondary optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Shido (3)"
                                        >+</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr class="scoreboard_fighter_row">
                <td>
                    <table style="background-color: #1515ec">
                        <tbody>
                            <tr>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(1,'ippon')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Ippon (Shift/Ctrl+4)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(1,'ippon')" oncontextmenu="event.preventDefault(); remove_point(1, 'ippon')" id="point_1_ippon">NaN</span>
                                        <button
                                            onclick="add_point(1,'ippon')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Ippon (4)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(1,'wazari')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Wazari (Shift/Ctrl+5)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(1,'wazari')" oncontextmenu="event.preventDefault(); remove_point(1, 'wazari')" id="point_1_wazari">NaN</span>
                                        <button
                                            onclick="add_point(1,'wazari')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Wazari (5)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point">
                                        <button
                                            onclick="remove_point(1,'yuko')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Yuko (Shift/Ctrl+9)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(1,'yuko')" oncontextmenu="event.preventDefault(); remove_point(1, 'yuko')" id="point_1_yuko">NaN</span>
                                        <button
                                            onclick="add_point(1,'yuko')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Yuko (9)"
                                        >+</button>
                                    </div>
                                </td>
                                <td style="width:25%">
                                    <div class="point penalty">
                                        <button
                                            onclick="remove_point(1,'shido')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Remove Shido (Shift/Ctrl+6)"
                                        >-</button>
                                        <span class="lh-sm" onclick="add_point(1,'shido')" oncontextmenu="event.preventDefault(); remove_point(1, 'shido')" id="point_1_shido">NaN</span>
                                        <button
                                            onclick="add_point(1,'shido')"
                                            type="button"
                                            class="btn btn-light optional control-visibility"
                                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add Shido (6)"
                                        >+</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr class="scoreboard_time_row">
                <td>
                    <table style="background-color: #000000">
                        <tbody>
                            <tr>
                                <td class="text-center" style="width: 35%">
                                    <div class="optional control-visibility" id="controllers_main">
                                        <!-- Set fight time -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center mb-2">
                                                <div class="input-group" style="width:29em;">
                                                    <input id="total_fight_time_reset_minutes" type="number" min="0" step="1" value="4" class="form-control"
                                                        placeholder="Minutes" aria-label="Minutes" aria-describedby="Minutes" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Minutes" oninput="total_fight_time_reset_change()">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text colon">:</span>
                                                    </div>
                                                    <input id="total_fight_time_reset_seconds" type="number" min="0" step="1" value="0" class="form-control"
                                                        placeholder="Seconds" aria-label="Seconds" aria-describedby="Seconds" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Seconds" oninput="total_fight_time_reset_change()">
                                                    <a class="btn btn-success" onclick="reset_all()" data-bs-toggle="tooltip" data-bs-placement="top"
                                                        data-bs-title="Reset all (Enter)">
                                                        <i class="fa fa-fw fa-rotate" style="width: 2em;"></i>
                                                        <span id="total_fight_time_reset_time">NaN</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Reset for golden score -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center mb-2">
                                                <div class="input-group" style="width:29em;">
                                                    <input id="golden_score_time_set_minutes" type="number" min="0" step="1" value="0" class="form-control"
                                                        placeholder="Minutes" aria-label="Minutes" aria-describedby="Minutes" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Minutes" oninput="golden_score_time_set_change()">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text colon">:</span>
                                                    </div>
                                                    <input id="golden_score_time_set_seconds" type="number" min="0" step="1" value="0" class="form-control"
                                                        placeholder="Seconds" aria-label="Seconds" aria-describedby="Seconds" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Seconds" oninput="golden_score_time_set_change()">
                                                    <a class="btn btn-success" onclick="reset_for_golden_score()" data-bs-toggle="tooltip" data-bs-placement="top"
                                                        data-bs-title="Reset for Golden Score (G)">
                                                        <i class="fa fa-fw" style="width: 2em;">GS</i>
                                                        <span id="golden_score_time_reset_time">NaN</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Set clock -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center mb-2">
                                                <div class="input-group" style="width:29em;">
                                                    <input id="central_clock_set_minutes" type="number" min="0" step="1" value="4" class="form-control"
                                                        placeholder="Minutes" aria-label="Minutes" aria-describedby="Minutes" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Minutes" oninput="central_clock_set_change()">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text colon">:</span>
                                                    </div>
                                                    <input id="central_clock_set_seconds" type="number" min="0" step="1" value="0" class="form-control"
                                                        placeholder="Seconds" aria-label="Seconds" aria-describedby="Seconds" data-bs-toggle="tooltip"
                                                        data-bs-placement="top" data-bs-title="Seconds" oninput="central_clock_set_change()">
                                                    <a class="btn btn-success" onclick="central_clock_set()" data-bs-toggle="tooltip" data-bs-placement="top"
                                                        data-bs-title="Set central clock (no reset)">
                                                        <i class="fa fa-fw fa-stopwatch" style="width: 2em;"></i>
                                                        <span id="central_clock_set_time">NaN</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Set competition mode -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center">
                                                <div class="input-group" style="width:29em">
                                                    <select name="competition_mode" id="competition_mode_input" class="form-control" aria-label="Competition_mode" aria-describedby="Competition_mode">
                                                        <option value="false">Regular Competition</option>
                                                        <option value="true">GS Competition</option>
                                                    </select>
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text colon">:</span>
                                                    </div>
                                                    <input id="max_gs_time_input" type="number" min="0" step="1" value="20" class="form-control"
                                                           placeholder="GS max minutes" aria-label="GS max minutes" aria-describedby="GS max minutes" data-bs-toggle="tooltip"
                                                           data-bs-placement="top" data-bs-title="GS max minutes">
                                                    <button class="btn btn-success" type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="* Regular Competition - 2 Wazari or 3 Shido. * GS Competition - 1 wazari or 2 Shido."
                                                            onclick="apply_competition_mode()">Competition Mode & GS Max Time</button>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Set osaekomi clock  -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center">
                                                <div class="input-group" style="width:29em">
                                                    <input id="osaekomi_seconds_input" type="number" min="0" max="20" step="1" value="10" class="form-control" placeholder="Osaekomi seconds" aria-label="Osaekomi seconds" aria-describedby="Osaekomi seconds">
                                                    <button class="btn btn-success" type="button" onclick="apply_osaekomi_seconds()">Set Osaekomi Clock</button>
                                                </div>
                                            </div>
                                        </div>
										<!-- Set clock font size  -->
                                        <div class="mb-2">
                                            <div class="d-flex justify-content-center">
                                                <div class="input-group" style="width:29em">
                                                    <input id="clock_font_size" type="number" min="1" max="22" step="1" value="13" class="form-control" placeholder="Clock font size" aria-label="Clock font size" aria-describedby="Clock font size">
                                                    <button class="btn btn-success" type="button" onclick="apply_clock_font_size()">Set Clock Font Size</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="optional" id="controllers_logo">
                                        <img class="meitav_logo_zoom" id="meitav_logo" src="images/Meitav_Logo.png" onclick="show_hide_controllers()" alt="meitav_logo" style="position: relative; height: 60px; background-color: yellow; z-index: 999;">
                                        <div>
                                            <label style="font-size: 10px"> ©All rights reserved to Nir Gavish </label>
                                        </div>
                                    </div>
                                </td>
                                <td style="width: 35%">
                                    <div class="timer">
                                        <span id="overtime" style="display: none">
                                            GS
                                        </span>
                                        <span onclick="central_clock_time_click()" id="central_clock_time" class="timer_seconds lh-sm">NaN</span>
                                        <span class="timer_tenths">
                                            <span style="visibility: hidden;">.</span>
                                            <span id="central_clock_time_tenths" style="visibility: hidden;">NaN</span>
                                        </span>
                                    </div>
                                    <div class="optional">
                                        <div class="mb-2">
                                            <a id="central_clock_pause_continue" class="btn btn-success control-visibility" onclick="central_clock_pause_continue()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Hajime (Space)">
                                                <i id="central_clock_pause_continue_img" class="fa fa-fw fa-play"></i>
                                            </a>
                                        </div>
                                    </div>
                                </td>
                                <td style="width: 30%">
                                    <div class="timer" style="color:#0bff18;">
                                        <button class="btn" type="button" id="osaekomi_assign_view" style="width: 20%; height: 50px; margin-top: 25px; cursor: default; visibility: hidden"></button>
                                        <span onclick="osaekomi_start_stop()" id="osaekomi_time" class="timer_seconds lh-sm">NaN</span>
                                        <button type="button" id="osaekomi_assign_view_hidden" style="width: 20%; visibility: hidden" disabled></button>
                                    </div>
                                    <div class="mb-2 optional control-visibility" id="osaekomi_main_controllers">
                                        <a id="osaekomi_start_stop" class="btn btn-success" onclick="osaekomi_start_stop()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Osaekomi (W)">
                                            <i id="osaekomi_start_stop_img" class="fa fa-fw fa-play"></i>
                                        </a>
                                        <a id="osaekomi_reset" class="btn btn-success disabled" onclick="osaekomi_reset()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Reset (S)">
                                            <i id="osaekomi_reset_img" class="fa-fw fa fa-arrow-rotate-left"></i>
                                        </a>
                                        <a id="osaekomi_pause_continue" class="btn btn-success" onclick="osaekomi_pause_continue()" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Continue">
                                            <i id="osaekomi_pause_continue_img" class="fa fa-fw fa-play"></i>
                                        </a>
                                    </div>
                                    <div class="optional" id="osaekomi_assign_controllers">
                                        <div class="mb-2">
                                            <div class="input-group d-flex justify-content-center">
                                                <button
                                                    class="btn btn-light"
                                                    type="button"
                                                    id="osaekomi_assign_0"
                                                    onclick="osaekomi_assign(0);"
                                                    style="width: 20%"
                                                    data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Assign to white (A)"
                                                >
                                                    White
                                                </button>
                                                <span id="osaekomi_assign_text" class="input-group-text" style="background-color: transparent; color: white; border: 0 solid transparent; width: 20%; justify-content: center;">«« Tori ? »»</span>
                                                <button
                                                    class="btn btn-primary"
                                                    type="button"
                                                    id="osaekomi_assign_1"
                                                    onclick="osaekomi_assign(1);"
                                                    style="width: 20%"
                                                    data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Assign to blue (D)"
                                                >
                                                    Blue
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>

    <a type="button" class="btn btn-secondary btn-floating optional control-visibility" id="enable_view_only_tab" href="#view" target="_blank" rel="noopener noreferrer" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Open View Mode (hold Shift for new window)">
        <i class="fas fa-eye"></i>
    </a>

    <br>

    <div class="container">
        <h2 id="usage">Usage</h2>

        To use this scoreboard in a competition, proceed as follows:
        <ul>
            <li>Connect your laptop/computer to a second monitor (or projector).</li>
            <li>Set up your display settings to extended view (typically by using F8/F2).</li>
            <li>Open a new view-mode tab/window by clicking the eye icon in the top left corner.</li>
            <li>Move the opened tab to the second monitor (can be done by dragging it or by clicking {START/WIN+SHIFT+ARROW} on the keyboard.</li>
            <li>Click into the moved tab (view-mode) and press F11 (Windows OS) to switch to full screen view.</li>
            <li>Move the mouse back to the original tab and use the judoscoreboard from there.</li>
            <li>Most buttons can also be triggered by keyboard shortcuts, which are noted as hover information on the respective buttons.</li>
            <li>*** Alternatively, you can click 'V' or Meitav logo to change all controllers visibility (hidden) and use 1 monitor.</li>
        </ul>

        Here is an overview of all keyboard shortcuts:

        <table class="table">
            <thead class="thead-light">
                <tr>
                    <th>Action</th>
                    <th>Keyboard Shortcut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Hajime</td>
                    <td>Space (also resets Osaekomi)</td>
                </tr>
                <tr>
                    <td>Mate</td>
                    <td>Space</td>
                </tr>
                <tr>
                    <td>Golden Score</td>
                    <td>G</td>
                </tr>
                <tr>
                    <td>Osaekomi</td>
                    <td>W, assign with A or D</td>
                </tr>
                <tr>
                    <td>Toketa</td>
                    <td>W, optionally reset time with S</td>
                </tr>
                <tr>
                    <td>Ippon</td>
                    <td>1 (white) or 5 (blue),   Note: shift/ctrl to deduct</td>
                </tr>
                <tr>
                    <td>Wazari</td>
                    <td>2 (white) or 6 (blue),   Note: shift/ctrl to deduct</td>
                </tr>
                <tr>
                    <td>Yuko</td>
                    <td>3 (white) or 7 (blue),   Note: shift/ctrl to deduct</td>
                </tr>
                <tr>
                    <td>Shido</td>
                    <td>4 (white) or 8 (blue),   Note: shift/ctrl to deduct</td>
                </tr>
                <tr>
                    <td>Next Fight (Reset Scoreboard)</td>
                    <td>Enter</td>
                </tr>
                <tr>
                    <td>Change Controllers Visibility Mode</td>
                    <td>V or Mouse click over Meitav yellow logo</td>
                </tr>
                <tr>
                    <td>Set Fight Time</td>
                    <td>Use Mouse & Type Value</td>
                </tr>
                <tr>
                    <td>Continue (Fight & Osaekomi). Useful if accidentally stopped the fight.</td>
                    <td>C</td>
                </tr>
            </tbody>
        </table>

        <h2>About</h2>

        <p>This is a free and open-source project licensed under the
            <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU Affero General Public License</a>,
            <a href="https://www.tldrlegal.com/license/gnu-affero-general-public-license-v3-agpl-3-0">Described Shortly Here</a>.
        </p>

        <p>This software was built using various resources, including but not limited to:
            <a href="https://fontawesome.com/">FontAwesome</a>,
            <a href="https://freesound.org">Freesound</a>,
            <a href="https://getbootstrap.com/">Bootstrap</a>.
        </p>

        <h2>Customize Rules</h2>

        You can adapt the judoscoreboard logic directly by modifying the below JSON configuration.
        Times are in milliseconds. Osaekomi times ("osaekomi_wazari_time", "osaekomi_ippon_time", "osaekomi_warn_unassigned") can be set to null to disable them.

        <div class="form-group">
            <label for="fight_rules"></label><textarea class="form-control" id="fight_rules" name="fight_rules" rows="17" cols="50">Not loaded...</textarea>
            <button class="btn btn-primary mt-2" onclick="set_fight_rules(); reset_all(); window.scrollTo({ top: 0, behavior: 'smooth' });">Update and Reset</button>
        </div>

      </div>

    <!-- RESOURCES -->

    <div id="audio">
        <audio id="audio_bell" src="./audio/sound_signal_02.mp3"></audio>
        <audio id="audio_error" src="./audio/error.mp3"></audio>
    </div>

    <link href="./css/bootstrap.css" rel="stylesheet">
    <link href="./css/fontawesome.css" rel="stylesheet">
    <link href="./css/solid.css" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">

    <script src="scripts/bootstrap.bundle.js"></script>
    <script src="scripts/style.js"></script>
    <script src="scripts/scoreboard.js"></script>
</body>
</html>